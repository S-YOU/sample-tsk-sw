[1] 章立て
マルチタスクOS入門
preface 本書について

1. マルチタスクOSとは
1.1. オペレーティングシステムの役割
1.2. マルチタスクOSとは
1.2.1. タスクという概念について
1.2.2. マルチタスクOS

2. 簡単なマルチタスクOSを作る
2.1. 本稿で作成するOSについて
      * 実行環境
      * 機能
2.2. 開発環境
      * Cコンパイラ
      * アセンブラ
      * 構築支援ツール
2.3. ソフトウエア構成
      * ソフトウエア構成

3. 最初の一歩
3.1. 文字列表示ルーチンを作る
3.2. アサーション
3.3. ヒープ管理
3.4. 文字列操作関数
3.5. パニック関数

4. タスク管理機構をつくろう(sample1)
4.1. 本章で作成する機能
     * OSの初期化
     * タスクの生成
     * タスクの起動
     * タスクの終了
     * タスクの破棄
     * タスクのスケジューリング
     * 割り込みの禁止/許可
4.2. タスクの状態遷移
4.3. レディキュー
4.4. コンテキスト切替え
4.5. クリティカルセクション
4.6. 初期スタックイメージ
4.7. 初期タスク
4.8. OSの初期化
4.9. 実装
	* タスク用スタックのデータ構造
	* タスクコントロールブロックのデータ構造
	* レディーキューのデータ構造
	* 割り込み禁止/許可マクロ
	* ディスパッチ処理を作る
	* タスクの生成処理を作る
	* レディーキューの回転処理を作る
	* タスクの起動処理を作る
	* タスクの終了処理を作る
	* タスクの破棄処理を作る
	* OSの初期化処理を作る
4.10. 動かしてみよう

5. 優先度付きスケジューリング
5.1. タスクの優先度と優先度付きスケジューリング
5.2. プリエンプション
5.2. ビットマップスケジューラ
5.3. 優先度ベースのスケジューリング
5.4. 実装 
     * タスクの優先度
     * 優先度付きスケジューラの作成
5.7. 動かしてみよう

6. タスク間同期/通信機構を作ろう(sample3)
6.1.  タスク間同期/通信機構とは
6.2.  タスク間同期/通信機構がなぜ必要か?
6.3.  代表的な同期/通信機構
6.3.1. セマフォ
6.3.2. イベントフラグ
6.3.3. シグナル
6.3.4. メールボックス
6.3.5. メッセージバッファ
6.4. タスクの休眠/起床
6.5. 資源の削除の対する対応
      *  通信プリミティブ 
	(1) 削除時に, 待ち手を起こしてエラーにする
            必要があること
	(2) 削除時に, その資源を取得しているタスクへの割り当てを
            解除する必要があること(セマフォの場合)
      *  タスク 
	(1)  資源を開放し, 待ちを起こす. 
        (2)  物によっては, 相手を起こしてエラーにする
             (タスクを直接指定する場合, 今回はオブジェクト経由の
              通信しかないので関係ない)
6.6. タスクの休眠/起床機構を作ろう
6.7. mutexの実装
6.8. 動かしてみよう

7. CPU例外制御機構
7.1. 割り込み/例外/トラップ
7.2. システムの状態
7.3. CPU例外ハンドラ
7.4. 実機で動作するようにしよう
7.4.1. メモリセグメント
7.4.2. メモリセグメントの定義処理を作成しよう
7.4.3. 割り込みベクタの定義処理を作成しよう
7.4.4. 割り込み制御マクロを完成させよう
7.4.5. ブートローディング処理を作成しよう
7.5. 動かしてみよう
7.5.1. トラップの受付け確認

8. 割込み制御機構
8.1. CPUに割込みが通知されるまでの流れ
8.2. 割込みコントローラ
8.3. 割込み管理機構の構成要素
8.4. 割込み処理の流れ
8.5. 割り込みの共有
8.6. 多重割り込み
8.7. タスクスケジュールの遅延(遅延ディスパッチング)
8.8. 割り込みハンドラからスリープ/スケジューラを呼べない理由
8.9. 割込み管理機構の実装
8.9.1. 割込み処理共通部
8.9.2. 割込みコントローラ管理機構
8.9.3. 割り込みハンドラの登録/削除機構
8.9.4. 周期タイマ割込み機能の実装
8.10. 動かしてみよう

9. 時間管理(sample7)
9.1. OSが行う時間管理
9.2. タイマハンドラの実装
9.3. 時間待ちシステムコールの実装(alarm)
9.4. 動かしてみよう

あとがき

A. コンフィグレータ
A.1. コンフィグレーション項目
A.2. 使用法
B.   Tinyサービスコール仕様
B.1.   タスク(スレッド)管理
B.2.   タスク間同期/通信機構
B.3.   メモリ管理
B.4.   割り込み管理
B.5.   時間管理






